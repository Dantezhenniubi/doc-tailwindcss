---
outline: [2, 6]
tag: ['tailwindcss', '语法']
---

# tailwindcss语法
这里记录一些使用tailwindcss过程中值得注意的语法

## 使用任意值
在tailwindcss中，我们可以使用任意值来定义类
详见[官方文档](https://tailwindcss.com/docs/adding-custom-styles#arbitrary-properties)

### 在类中使用自定义值

在使用tailwindcss的实用类时，我们通常可以自定义想要的值而不是使用预设的值，比如：

::: CTcode
```html
<div class="w-[100px]">...</div>
```
:::

但是我们会发现一个问题：
:::
```css
.card {
    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);
}
```
:::
像这样的值，该怎么办呢？

我们一般想到的是，比如`inset`每个值代表的是`top`、`right`、`bottom`、`left`，难道就写成这样？？？
::: CTcode
```html
<div class="top-[-50px] right-[60px] bottom-[250px] left-[60px]">...</div>
```
```css
.card { 
    @apply top-[-50px] right-[60px] bottom-[250px] left-[60px]
}
```
:::
::: danger 显然这么做很不优雅，类名多了之后可维护性也是一团糟，虽然保持了可读性
:::
**正确的写法是，使用Tailwind JIT模式内联样式**<br>
::: success  Tailwind JIT模式内联样式
```html
<div class="inset-[-50px_60px_250px_60px]">...</div>
```
```css
.img-box {
    @apply inset-[-50px_60px_250px_60px] shadow-[0_0_0_10px_var(--clr)]
}
```
:::

### 自定义属性
如果您需要使用 Tailwind 没有提供开箱即用的实用程序的 CSS 属性，您还可以使用方括号表示法来编写完全任意的 CSS：
::: CTcode
```html
<div class="[mask-type:luminance] [font-family:KMHai]!">
  <!-- ... -->
</div>
```
很像内联样式，且支持使用修饰符
```html
<div class="[mask-type:luminance] hover:[mask-type:alpha]">
  <!-- ... -->
</div>
```
还支持使用自定义主题变量，特别是当它们需要在不同条件下改变时：
```html
<div class="[--scroll-offset:56px] lg:[--scroll-offset:44px]">
  <!-- ... -->
</div>
```
:::

### 支持变体前缀
所有都支持例如`lg:`、`before:`这样的变体前缀
::: CTcode
```html
<div class="lg:bg-[--my-brand-color] lg:text-[22px] before:content-['Festivus'] [mask-type:luminance] hover:[mask-type:alpha]">
  <!-- ... -->
</div>
```
:::

### 多个transition过渡属性
在指定transition属性时，为了不影响多个属性，我们通常会指定transition影响的属性。

但是这在tailwindcssV4版本中，必须使用任意值语法，否则后面的会覆盖前面的属性：
::: danger 错误写法
```html
<div class="
       h-[7rem] hover:h-48
       shadow hover:shadow-lg
       transition-height duration-300 ease-in-out
       transition-shadow duration-300 ease-in-out"> </div>
```
:::
这会导致`transition-shadow`覆盖`transition-height`，从而导致只有`transition-shadow`生效，只有阴影有过渡效果，而高度变化却没有过渡效果。

正确写法如下，使用任意值语法：
::: success 正确写法
```html
<!-- 方括号里加原生CSS属性名 -->
<div class="transition-[height,box-shadow] duration-800 ease-in-out"></div>
```
:::



## 选择器嵌套
按css的嵌套规则，我们同样可以嵌套带有tailwindcss实用类的选择器
嵌套选择器，可以参考[CSS教程](https://developer.mozilla.org/zh-CN/docs/Web/CSS/Nesting_selector)

## 使用important修饰符
[官方文档](https://tailwindcss.com/docs/styling-with-utility-classes#using-the-important-modifier)
当你确实需要强制特定的实用程序类生效并且没有其他方法来管理特殊性时，你可以!在类名末尾添加以进行所有声明!important：
::: CTcode 
```html
<div class="bg-teal-500 bg-red-500!">
  <!-- ... -->
</div>
```
生成的 CSS
```css
.bg-red-500\! {
  background-color: var(--color-red-500) !important;
}
.bg-teal-500 {
  background-color: var(--color-teal-500);
}
```
:::

## 使用指令
tailwindcss提供了一些`@`开头的指令，方便我们编写

### @theme
使用@theme指令定义项目的自定义设计标记，如字体、颜色和断点：
::: CTcode
```css
@theme {
  --font-display: "Satoshi", "sans-serif";
  --breakpoint-3xl: 120rem;
  --color-avocado-100: oklch(0.99 0 0);
  --color-avocado-200: oklch(0.98 0.04 113.22);
  --color-avocado-300: oklch(0.94 0.11 115.03);
  --color-avocado-400: oklch(0.92 0.19 114.08);
  --color-avocado-500: oklch(0.84 0.18 117.33);
  --color-avocado-600: oklch(0.53 0.12 118.34);
  --ease-fluid: cubic-bezier(0.3, 0, 0, 1);
  --ease-snappy: cubic-bezier(0.2, 0, 0, 1);
  /* ... */
}
```
:::

### @apply
使用@apply指令将任何现有的实用程序类内联到自己定义的 CSS 中：
::: CTcode
```css
.select2-dropdown {
  @apply rounded-b-lg shadow-md;
}
.select2-search {
  @apply rounded border border-gray-300;
}
.select2-results__group {
  @apply text-lg font-bold text-gray-900;
}
```
:::
当需要编写自定义 CSS（例如覆盖第三方库中的样式）但仍想使用设计令牌并使用您在 HTML 中习惯使用的相同语法时，这很有用。
::: warning 使用注意事项
由于组件style内没有上下文，需要手动导入访问tailwindcss的样式,详情请看[在Vue组件中使用](#在Vue组件中使用)
:::

### @utility
自定义实用程序。很有用的功能，你可以自己编写像tailwindcss默认的实用程序。

::: CTcode
```css
@utility custom-font-style {
    font-family: "KMHai" !important;  /* 像普通选择器一样编写样式（此处important是由于本项目特殊性，需要强制覆盖） */

    @apply text-[30px] font-bold dark:line-through; /* 嵌套tailwindcss的实用类，很常见的做法，主要注意不要和常规重复了 */

    color: var(--text-color-customFont) !important; /* 使用@theme中定义好的样式变量 */
  }
```
:::

在HTML中使用:
::: CTcode
```html
<div class="custom-font-style">
  <!-- ... -->
</div>
```
支持与诸如hover、focus之类的变体前缀一起使用：
```html
<div class="hover:custom-font-style">
  <!-- ... -->
</div>
```
:::

::: tip 还不够？
支持更多的自定义，比如使用像`tab-size-*`即`tab-size-4`这样的接受参数的样式变量，详情请看[官方文档](https://tailwindcss.com/docs/adding-custom-styles#complex-utilities)<br>
甚至可以解析文字的参数，比如`tab-inherit`
:::


### @variant
使用@variant指令将 Tailwind 变体应用于 CSS 中的样式：
::: CTcode
```vue
<style scoped>
@reference "tailwindcss";

/* 背景蒙版渐变色 */
.bg-mask-container {
  @apply bg-gradient-to-br from-cyan-300/20 to-teal-400/20;

  @variant dark {
    @apply bg-gradient-to-br from-blue-300/20 to-purple-400/20;
  }
}
</style>
```
变体部分编译后变成这样：
```vue
<style scoped> 
.my-element {
  background: white; ....类似的属性

  @media (prefers-color-scheme: dark) {
    background: black; ....类似的属性
  }
}
</style>
```
:::

支持变体嵌套：
::: CTcode
```css
.my-element {
  background: white;
  @variant dark {
    @variant hover {
      background: black;
    }
  }
}
```
编译后的CSS：
```css
.my-element {
  background: white;
  @media (prefers-color-scheme: dark) {
    &:hover {
      @media (hover: hover) {
        background: black;
      }
    }
  }
}
```
:::

## 使用前缀
Tailwind CSS 允许您使用前缀来控制生成的CSS。

## 响应式设计
详情请看[官方文档](https://tailwindcss.com/docs/responsive-design)

在类名前面加上响应式前缀作为断点，如：
::: CTcode
```html
<img class="w-16 md:w-32 lg:w-48" src="..." />
```
:::

::: warning 必须要注意
你在定义不同的前缀时，必须确保至少有一个兜底的样式
比如`class="w-16 md:w-32 lg:w-48"`中，`w-16`是兜底样式`，必须拥有才能形成断点系统。
:::

## 在Vue组件中使用 {#在Vue组件中使用}
由于组件中style的上下文读取不到tailwindcss的配置，因此需要使用[`@reference`指令](https://tailwindcss.com/docs/functions-and-directives#reference-directive)来引入tailwindcss的配置，这样我们就能使用引入tailwindcss配置里的主题变量、自定义实用程序和自定义变体：
::: CTcode
```vue
<style scoped>
@reference "tailwindcss";
.bg-mask-container { 
  @apply bg-gradient-to-br from-cyan-300/20 to-teal-400/20;
}
</style>
```
:::
需要注意的是，如果导入的是`@reference "tailwindcss";`，则使用的是tailwindcss的默认主题变量
如果需要使用自定义的变量，则需要使用`@reference`来导入主样式表以供参考，而无需实际包含样式
::: CTcode
```vue
<style>
  @reference "../../app.css";
  h1 {
    @apply text-2xl font-bold text-red-500;
  }
</style>
```
:::

## 负值的写法
Tailwind 里 **负值** 要用 **连字符** 写法：
::: danger 错误写法
```css
hover:translate-y-[-2]
```
:::

::: success 正确写法
```css
/* 负 2 像素上移 */
hover:-translate-y-2
```
:::

## group父级状态传递器
我们有时候会有这样的需求：一个卡片，我在hover这样的状态时，想让里面的文字应用对应样式，而不是hover到文字了才生效。

`group`类就是 Tailwind 的「父级状态传递器」：
1. 你在父元素写 `class="group"`
2. 在任意子/孙元素写 `group-hover:xxx` / `group-focus:xxx` / `group-active:xxx`
3. 当 父元素被 `hover（或 focus/active）` 时，子元素立即应用对应样式
**「父级负责触发状态，子级负责变样」** —— 这就是 group 的核心作用。
